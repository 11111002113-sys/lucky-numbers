<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Lucky Numbers</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <h1>‚öôÔ∏è Admin Dashboard</h1>
        <p>Manage Lucky Numbers</p>
        <nav class="nav">
          <a href="/admin/dashboard.html" class="nav-link active">Dashboard</a>
          <a href="/admin/settings.html" class="nav-link">Settings</a>
          <a href="/" class="nav-link" target="_blank">View Website</a>
          <a href="#" class="nav-link" onclick="logout()">Logout</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container">
    <!-- Welcome Message -->
    <div class="card" style="padding: 15px;">
      <h3 style="margin: 0; font-size: 1rem;">Welcome, <span id="adminName">Admin</span>! üëã</h3>
    </div>

    <!-- Success/Error Messages -->
    <div id="successMessage" class="alert alert-success" style="display: none;"></div>
    <div id="errorMessage" class="alert alert-error" style="display: none;"></div>

    <!-- Today's Result Management -->
    <div class="card" style="padding: 15px;">
      <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1rem;">
        üìÖ Today: <span id="todayDate">Loading...</span>
      </h3>

      <form id="todayResultForm" onsubmit="updateTodayResult(event)">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 10px;">
          <div class="form-group" style="margin-bottom: 0;">
            <label for="frTime" style="font-size: 0.85rem; margin-bottom: 5px;">F/R Time</label>
            <input type="time" id="frTime" name="frTime" value="15:15" style="padding: 8px;">
          </div>

          <div class="form-group" style="margin-bottom: 0;">
            <label for="frResult" style="font-size: 0.85rem; margin-bottom: 5px;">F/R Result (0-99)</label>
            <input 
              type="number" 
              id="frResult" 
              name="frResult" 
              min="0" 
              max="99" 
              placeholder="Enter FR"
              style="padding: 8px;"
            >
          </div>

          <div class="form-group" style="margin-bottom: 0;">
            <label style="font-size: 0.85rem; margin-bottom: 5px; opacity: 0;">Action</label>
            <button 
              type="button" 
              class="btn btn-success btn-block" 
              onclick="declareFR()"
              id="declareFRBtn"
              style="padding: 8px; font-size: 0.85rem;"
            >
              Declare F/R
            </button>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 10px;">
          <div class="form-group" style="margin-bottom: 0;">
            <label for="srTime" style="font-size: 0.85rem; margin-bottom: 5px;">S/R Time</label>
            <input type="time" id="srTime" name="srTime" value="16:15" style="padding: 8px;">
          </div>

          <div class="form-group" style="margin-bottom: 0;">
            <label for="srResult" style="font-size: 0.85rem; margin-bottom: 5px;">S/R Result (0-99)</label>
            <input 
              type="number" 
              id="srResult" 
              name="srResult" 
              min="0" 
              max="99" 
              placeholder="Enter SR"
              style="padding: 8px;"
            >
          </div>

          <div class="form-group" style="margin-bottom: 0;">
            <label style="font-size: 0.85rem; margin-bottom: 5px; opacity: 0;">Action</label>
            <button 
              type="button" 
              class="btn btn-success btn-block" 
              onclick="declareSR()"
              id="declareSRBtn"
              style="padding: 8px; font-size: 0.85rem;"
            >
              Declare S/R
            </button>
          </div>
        </div>
              Declare S/R
            </button>
          </div>
        </div>

        <div class="form-actions" style="gap: 8px; margin-top: 10px;">
          <button type="submit" class="btn btn-primary" style="padding: 8px 16px; font-size: 0.85rem;">
            Update Both
          </button>
          <button type="button" class="btn btn-warning" onclick="lockResult()" id="lockBtn" style="padding: 8px 16px; font-size: 0.85rem;">
            üîí Lock
          </button>
          <button type="button" class="btn btn-secondary" onclick="unlockResult()" id="unlockBtn" style="display: none; padding: 8px 16px; font-size: 0.85rem;">
            üîì Unlock
          </button>
        </div>

        <!-- Current Status -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 15px; padding: 12px; background: var(--background); border-radius: 6px;">
          <div>
            <strong style="font-size: 0.75rem; color: var(--text-secondary);">F/R:</strong>
            <span id="currentFR" style="font-size: 0.95rem; font-weight: 600;">-</span>
          </div>
          <div>
            <strong style="font-size: 0.75rem; color: var(--text-secondary);">S/R:</strong>
            <span id="currentSR" style="font-size: 0.95rem; font-weight: 600;">-</span>
          </div>
          <div>
            <strong style="font-size: 0.75rem; color: var(--text-secondary);">STATUS:</strong>
            <span id="currentStatus" class="status-badge" style="font-size: 0.7rem;">Loading</span>
          </div>
          <div>
            <strong style="font-size: 0.75rem; color: var(--text-secondary);">LOCKED:</strong>
            <span id="lockStatus" style="font-size: 0.85rem;">-</span>
          </div>
        </div>
      </form>
    </div>

    <!-- Edit Past Results -->
    <div class="card" style="padding: 15px;">
      <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1rem;">üìù Edit Past Results</h3>
      
      <form id="editResultForm" onsubmit="editPastResult(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="editDate">Select Date</label>
            <input type="date" id="editDate" name="editDate" required>
          </div>

          <div class="form-group">
            <button type="button" class="btn btn-secondary btn-block" onclick="loadResultByDate()">
              Load Result
            </button>
          </div>
        </div>

        <div id="editResultFields" style="display: none;">
          <div class="form-row">
            <div class="form-group">
              <label for="editFrTime">F/R Time</label>
              <input type="time" id="editFrTime" name="editFrTime">
            </div>

            <div class="form-group">
              <label for="editFrResult">F/R Result</label>
              <input type="number" id="editFrResult" name="editFrResult" min="0" max="99">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="editSrTime">S/R Time</label>
              <input type="time" id="editSrTime" name="editSrTime">
            </div>

            <div class="form-group">
              <label for="editSrResult">S/R Result</label>
              <input type="number" id="editSrResult" name="editSrResult" min="0" max="99">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              Update Past Result
            </button>
            <button type="button" class="btn btn-secondary" onclick="clearEditForm()">
              Clear
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Recent Results -->
    <div class="card" style="padding: 15px;">
      <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1rem;">üìä Recent Results</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>F/R</th>
              <th>S/R</th>
              <th>Status</th>
              <th>Locked</th>
            </tr>
          </thead>
          <tbody id="recentResultsTable">
            <tr>
              <td colspan="5" style="text-align: center;">Loading...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 Lucky Numbers Admin Panel</p>
  </footer>

  <script src="/js/admin-dashboard.js"></script>
</body>
</html>
